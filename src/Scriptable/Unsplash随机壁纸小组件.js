// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: yellow; icon-glyph: image;
// 更多内容请关注公众号 @Nandelion
// 脚本运行需要Unsplash API的Access Key密钥，请前往 https:// source.unsplash.com/ 注册开发者获取
if(config["\u0072\u0075\u006e\u0073\u0049\u006e\u0041\u0070\u0070"]){let accessToken;try{accessToken=Keychain["\u0067\u0065\u0074"]("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e");if(accessToken===null||accessToken===undefined){accessToken="".split("").reverse().join("");}}catch(_0x277b8e){console["\u006c\u006f\u0067"](_0x277b8e);accessToken="";}let tag;try{tag=Keychain["\u0067\u0065\u0074"]("gat".split("").reverse().join(""));if(tag===null||tag===undefined){tag="".split("").reverse().join("");}}catch(_0x170b87){console["\u006c\u006f\u0067"](_0x170b87);tag="erutaN,srepapllaW".split("").reverse().join("");}let alert=new Alert();alert["\u0074\u0069\u0074\u006c\u0065"]="\u8bf7\u586b\u5199\u53c2\u6570";alert['message']="\uFF1B\u8BCD\u952E\u5173\u9694\u5206\u6765\u53F7\u9017\u6587\u82F1,\u7528\u4EE5\u53EF\uFF0CerutaN,srepapllaW\u4E3A\u8BA4\u9ED8\uFF0C\u5BB9\u5185\u7684\u7247\u56FE\u666F\u80CC\u5B9A\u51B3\u4F1A\u8BCD\u952E\u5173\u6587\u82F1gaT \u2461\n\uFF1B\u53D6\u83B7\u8005\u53D1\u5F00\u518C\u6CE8 /moc.hsalpsnu.ecruos //:sptth \u5F80\u524D\u8BF7\u94A5\u5BC6yeK sseccA \u2460".split("").reverse().join("");alert['addTextField']("yeK sseccA".split("").reverse().join(""),accessToken||"");alert['addTextField']("gaT".split("").reverse().join(""),tag||"erutaN,srepapllaW".split("").reverse().join(""));alert["\u0061\u0064\u0064\u0041\u0063\u0074\u0069\u006f\u006e"]('确定');let response=await alert["\u0070\u0072\u0065\u0073\u0065\u006e\u0074\u0041\u006c\u0065\u0072\u0074"]();let userInput1=alert['textFieldValue'](0x8c61b^0x8c61b)['trim']();let userInput2=alert['textFieldValue'](0x518ad^0x518ac)['trim']();Keychain['set']("nekoTssecca".split("").reverse().join(""),userInput1);Keychain['set']('tag',userInput2);}const widget=await createWidget();Script["\u0073\u0065\u0074\u0057\u0069\u0064\u0067\u0065\u0074"](widget);async function createWidget(){const _0x2309ac=new ListWidget();_0x2309ac['setPadding'](0x5181e^0x5181e,0xe4425^0xe4425,0xabd40^0xabd40,0x3b7ee^0x3b7ee);const _0x2c78b8=_0x2309ac["\u0061\u0064\u0064\u0053\u0074\u0061\u0063\u006b"]();_0x2c78b8["\u0073\u0065\u0074\u0050\u0061\u0064\u0064\u0069\u006e\u0067"](0xd44e6^0xd44f6,0xbb5c2^0xbb5d2,0x8d45a^0x8d44a,0x4dc20^0x4dc30);_0x2c78b8['layoutVertically']();const _0x50914e=new Date()['toLocaleString']("hz".split("").reverse().join(""),{'month':'short',"\u0064\u0061\u0079":'numeric','weekday':'short'});let _0x49adf9;try{_0x49adf9=Keychain["\u0067\u0065\u0074"]("emiTdehcac".split("").reverse().join(""));if(_0x49adf9===null||_0x49adf9===undefined){_0x49adf9="\u0064\u0065\u0066\u0061\u0075\u006c\u0074\u0054\u0069\u006d\u0065";}}catch(_0x3405e1){console["\u006c\u006f\u0067"](_0x3405e1);_0x49adf9='defaultTime';}let _0x30f15e=FileManager['iCloud']();let _0x4cc6e2=_0x30f15e["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](_0x30f15e["\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079"](),'Unsplash随机壁纸');if(!_0x30f15e["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](_0x4cc6e2)){_0x30f15e["\u0063\u0072\u0065\u0061\u0074\u0065\u0044\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079"](_0x4cc6e2);}let _0x46a488=_0x30f15e['joinPath'](_0x4cc6e2,"\u0055\u006e\u0073\u0070\u006c\u0061\u0073\u0068\u968f\u673a\u58c1\u7eb8\u002e\u006a\u0070\u0065\u0067");let _0xe657c1=_0x30f15e["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](_0x4cc6e2,"txt.\u7EB8\u58C1\u673A\u968FhsalpsnU".split("").reverse().join(""));let _0x50ba1e;if(_0x50914e!==_0x49adf9||!_0x30f15e["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](_0x46a488)){const _0x24076a=await getImgUrl();try{_0x50ba1e=await getRandomPic(_0x24076a);}catch(_0x3f3fe7){console["\u006c\u006f\u0067"](_0x3f3fe7);}_0x30f15e['writeImage'](_0x46a488,_0x50ba1e);_0x30f15e['writeString'](_0xe657c1,""+_0x24076a[0x8a1d6^0x8a1d7]['raw']);if(_0x30f15e['fileExists'](_0x46a488)){console["\u006c\u006f\u0067"]("\u58c1\u7eb8\u4fdd\u5b58\u6210\u529f\u0021");}else{console['log']("\u3002\u8D25\u5931\u5B58\u4FDD\u7EB8\u58C1".split("").reverse().join(""));}const _0x3bff2d=_0x2c78b8['addStack']();const _0x2045fc=SFSymbol["\u006e\u0061\u006d\u0065\u0064"]("\u0070\u0061\u0070\u0065\u0072\u0070\u006c\u0061\u006e\u0065\u002e\u0066\u0069\u006c\u006c");const _0x37a675=_0x3bff2d["\u0061\u0064\u0064\u0049\u006d\u0061\u0067\u0065"](_0x2045fc["\u0069\u006d\u0061\u0067\u0065"]);_0x37a675['imageSize']=new Size(0x56d88^0x56d9a,0x12);_0x37a675["\u0074\u0069\u006e\u0074\u0043\u006f\u006c\u006f\u0072"]=Color["\u0077\u0068\u0069\u0074\u0065"]();_0x37a675["\u0075\u0072\u006c"]=''+_0x24076a[0x47383^0x47382]["\u0072\u0061\u0077"];_0x3bff2d['useDefaultPadding']();_0x3bff2d['addSpacer']();Keychain['set']("\u0075\u0072\u006c",''+_0x24076a[0x1]['raw']);Keychain['set']('cachedTime',_0x50914e);}else{_0x50ba1e=_0x30f15e["\u0072\u0065\u0061\u0064\u0049\u006d\u0061\u0067\u0065"](_0x46a488);const _0x4620de=_0x2c78b8['addStack']();const _0x28ce46=SFSymbol['named']('paperplane.fill');const _0x488765=_0x4620de['addImage'](_0x28ce46['image']);_0x488765['imageSize']=new Size(0x12,0x12);_0x488765['tintColor']=Color['white']();_0x488765['url']=Keychain["\u0067\u0065\u0074"]("\u0075\u0072\u006c");_0x4620de['useDefaultPadding']();_0x4620de['addSpacer']();}_0x2c78b8['addSpacer']();const _0x76ff5=_0x2c78b8["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](_0x50914e);_0x76ff5["\u0066\u006f\u006e\u0074"]=Font["\u0062\u006f\u006c\u0064\u0052\u006f\u0075\u006e\u0064\u0065\u0064\u0053\u0079\u0073\u0074\u0065\u006d\u0046\u006f\u006e\u0074"](0x10);_0x76ff5["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=Color["\u0077\u0068\u0069\u0074\u0065"]();_0x76ff5["\u006c\u0065\u0066\u0074\u0041\u006c\u0069\u0067\u006e\u0054\u0065\u0078\u0074"]();const _0x96cfe7=async(_0xcf989e,_0x372cd8=0.1)=>{const _0x1d8cd8=new DrawContext();_0x1d8cd8["\u0073\u0069\u007a\u0065"]=_0xcf989e["\u0073\u0069\u007a\u0065"];_0x1d8cd8["\u0064\u0072\u0061\u0077\u0049\u006d\u0061\u0067\u0065\u0049\u006e\u0052\u0065\u0063\u0074"](_0xcf989e,new Rect(0x0,0x65fa8^0x65fa8,_0xcf989e['size']["\u0077\u0069\u0064\u0074\u0068"],_0xcf989e["\u0073\u0069\u007a\u0065"]['height']));_0x1d8cd8['setFillColor'](new Color('#000000',_0x372cd8));_0x1d8cd8["\u0066\u0069\u006c\u006c\u0052\u0065\u0063\u0074"](new Rect(0xeb9a0^0xeb9a0,0x0,_0xcf989e["\u0073\u0069\u007a\u0065"]['width'],_0xcf989e["\u0073\u0069\u007a\u0065"]["\u0068\u0065\u0069\u0067\u0068\u0074"]));return await _0x1d8cd8['getImage']();};let _0x59ba66=await _0x96cfe7(_0x50ba1e);_0x2c78b8['backgroundImage']=_0x59ba66;const _0x4be498=new Date();const _0x10ad60=_0x4be498['getHours']();if(_0x10ad60===0x17){_0x2c78b8["\u0072\u0065\u0066\u0072\u0065\u0073\u0068\u0041\u0066\u0074\u0065\u0072\u0044\u0061\u0074\u0065"]=new Date(_0x4be498["\u0067\u0065\u0074\u0046\u0075\u006c\u006c\u0059\u0065\u0061\u0072"](),_0x4be498["\u0067\u0065\u0074\u004d\u006f\u006e\u0074\u0068"](),_0x4be498["\u0067\u0065\u0074\u0044\u0061\u0074\u0065"]()+0x1,0x0,0x55424^0x55424,0x0);}else{_0x2c78b8['refreshAfterDate']=new Date(_0x4be498['getFullYear'](),_0x4be498['getMonth'](),_0x4be498['getDate'](),_0x10ad60+0x1,0x0,0x0);}return _0x2309ac;}async function getImgUrl(){const _0x55d391=[];const _0x525a6c=Keychain['get']("nekoTssecca".split("").reverse().join(""))||'';const _0x9079f4=await randomLabel();const _0x40d9c7=await randomNumber();const _0x36d594="/sotohp/hcraes/moc.hsalpsnu.ipa//:sptth".split("").reverse().join("");let _0x5103e2='';const _0x410ea6={'client_id':_0x525a6c,'query':_0x9079f4,"\u0070\u0061\u0067\u0065":0x1,'per_page':0x18,'orientation':'squarish','order_by':'relevant'};for(const[_0x2a001c,_0x314cfa]of Object['entries'](_0x410ea6)){_0x5103e2+=_0x2a001c+'='+_0x314cfa+'&';}const _0x24caee=_0x36d594+'?'+_0x5103e2['slice'](0xe83bb^0xe83bb,-0x1);try{const _0x1e0ee4=new Request(_0x24caee);const _0x3fdf85=await _0x1e0ee4['loadJSON']();const _0xc961f9=await _0x3fdf85['results'][_0x40d9c7]['user'];_0x55d391['push'](_0xc961f9);const _0xabdcb6=await _0x3fdf85['results'][_0x40d9c7]['urls'];_0x55d391['push'](_0xabdcb6);return _0x55d391;}catch(_0x1ea53b){console['log'](_0x1ea53b);return null;}}async function randomLabel(){const _0xf10bfd=Keychain["\u0067\u0065\u0074"]('tag')||'Wallpapers,Nature';const _0x5e0dd5=_0xf10bfd['split'](',');const _0x5b1eb5=_0x5e0dd5;const _0x97b41c=_0x5b1eb5['length'];return _0x5b1eb5[Math['floor'](Math["\u0072\u0061\u006e\u0064\u006f\u006d"]()*_0x97b41c)];}async function randomNumber(){const _0xad28c3=Math['floor'](Math['random']()*0x18);return _0xad28c3;}async function getRandomPic(_0x46c9ba){try{const _0xc43f25=_0x46c9ba[0x1]['regular'];const _0x1cde6e=new Request(_0xc43f25);const _0x5c4834=await _0x1cde6e['loadImage']();return _0x5c4834;}catch(_0x3e537d){console['error']("\u3002\u786E\u6B63\u5199\u586B\u5426\u662FyeK sseccA\u662F\u5176\u5C24\uFF0C\u5F0F\u683C\u53CA\u6570\u53C2\u67E5\u68C0\u8BF7\uFF0C\u7EB8\u58C1\u673A\u968FhsalpsnU\u5230\u53D6\u83B7\u672A".split("").reverse().join(""));console['log'](_0x3e537d);return null;}}