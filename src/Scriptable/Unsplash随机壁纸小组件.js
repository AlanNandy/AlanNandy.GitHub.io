// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: yellow; icon-glyph: image;
// 更多内容请关注公众号 @Nandelion
// 脚本运行需要Unsplash API的Access Key密钥，请前往 https:// source.unsplash.com/ 注册开发者获取
const parameters=args["\u0070\u006c\u0061\u0069\u006e\u0054\u0065\u0078\u0074\u0073"][0x4910b^0x4910b]||"".split("").reverse().join("");if(parameters!=="\u4EE4\u6307\u6377\u5FEB".split("").reverse().join("")&&config["\u0072\u0075\u006e\u0073\u0049\u006e\u0041\u0070\u0070"]){let accessToken;try{accessToken=Keychain["\u0067\u0065\u0074"]("nekoTssecca".split("").reverse().join(""));if(accessToken===null||accessToken===undefined){accessToken="";}}catch(_0x3c79ee){console["\u006c\u006f\u0067"](_0x3c79ee);accessToken="";}let tag;try{tag=Keychain["\u0067\u0065\u0074"]("gat".split("").reverse().join(""));if(tag===null||tag===undefined){tag="".split("").reverse().join("");}}catch(_0x1d189b){console['log'](_0x1d189b);tag="erutaN,srepapllaW".split("").reverse().join("");}let alert=new Alert();alert["\u0074\u0069\u0074\u006c\u0065"]="\u6570\u53C2\u5199\u586B\u8BF7".split("").reverse().join("");alert["\u006d\u0065\u0073\u0073\u0061\u0067\u0065"]="\uFF1B\u8BCD\u952E\u5173\u9694\u5206\u6765\u53F7\u9017\u6587\u82F1,\u7528\u4EE5\u53EF\uFF0CerutaN,srepapllaW\u4E3A\u8BA4\u9ED8\uFF0C\u5BB9\u5185\u7684\u7247\u56FE\u666F\u80CC\u5B9A\u51B3\u4F1A\u8BCD\u952E\u5173\u6587\u82F1gaT \u2461\n\uFF1B\u53D6\u83B7\u8005\u53D1\u5F00\u518C\u6CE8 /moc.hsalpsnu.ecruos //:sptth \u5F80\u524D\u8BF7\u94A5\u5BC6yeK sseccA \u2460".split("").reverse().join("");alert['addTextField']('Access\x20Key',accessToken||"".split("").reverse().join(""));alert["\u0061\u0064\u0064\u0054\u0065\u0078\u0074\u0046\u0069\u0065\u006c\u0064"]("gaT".split("").reverse().join(""),tag||"\u0057\u0061\u006c\u006c\u0070\u0061\u0070\u0065\u0072\u0073\u002c\u004e\u0061\u0074\u0075\u0072\u0065");alert["\u0061\u0064\u0064\u0041\u0063\u0074\u0069\u006f\u006e"]("\u786e\u5b9a");let response=await alert["\u0070\u0072\u0065\u0073\u0065\u006e\u0074\u0041\u006c\u0065\u0072\u0074"]();let userInput1=alert['textFieldValue'](0x63d6e^0x63d6e)['trim']();let userInput2=alert['textFieldValue'](0x8cd02^0x8cd03)['trim']();Keychain['set']("nekoTssecca".split("").reverse().join(""),userInput1);Keychain["\u0073\u0065\u0074"]('tag',userInput2);}const widget=await createWidget();Script["\u0073\u0065\u0074\u0057\u0069\u0064\u0067\u0065\u0074"](widget);async function createWidget(){const _0x169e20=new ListWidget();_0x169e20['setPadding'](0xa1705^0xa1705,0xdd276^0xdd276,0x3e103^0x3e103,0x471ba^0x471ba);const _0x4cd571=_0x169e20['addStack']();_0x4cd571["\u0073\u0065\u0074\u0050\u0061\u0064\u0064\u0069\u006e\u0067"](0x61978^0x61968,0x411ec^0x411fc,0x93e15^0x93e05,0x10);_0x4cd571['layoutVertically']();const _0x4fa21a=new Date()['toLocaleString']('zh',{"\u006d\u006f\u006e\u0074\u0068":"\u0073\u0068\u006f\u0072\u0074","\u0064\u0061\u0079":"\u006e\u0075\u006d\u0065\u0072\u0069\u0063","\u0077\u0065\u0065\u006b\u0064\u0061\u0079":'short'});let _0x20d4a9;try{_0x20d4a9=Keychain['get']("emiTdehcac".split("").reverse().join(""));if(_0x20d4a9===null||_0x20d4a9===undefined){_0x20d4a9="\u0064\u0065\u0066\u0061\u0075\u006c\u0074\u0054\u0069\u006d\u0065";}}catch(_0x2f89a4){console["\u006c\u006f\u0067"](_0x2f89a4);_0x20d4a9="\u0064\u0065\u0066\u0061\u0075\u006c\u0074\u0054\u0069\u006d\u0065";}let _0x11bfb1=FileManager['local']();let _0x15e205=_0x11bfb1['joinPath'](_0x11bfb1['documentsDirectory'](),"\u7EB8\u58C1\u673A\u968FhsalpsnU".split("").reverse().join(""));if(!_0x11bfb1["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](_0x15e205)){_0x11bfb1["\u0063\u0072\u0065\u0061\u0074\u0065\u0044\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079"](_0x15e205);}let _0x86f147=_0x11bfb1['joinPath'](_0x15e205,"gepj.\u7EB8\u58C1\u673A\u968FhsalpsnU".split("").reverse().join(""));let _0x3417fa;if(_0x4fa21a!==_0x20d4a9||!_0x11bfb1['fileExists'](_0x86f147)){const _0x2b03da=await getImgUrl();try{_0x3417fa=await getRandomPic(_0x2b03da);}catch(_0x5926ed){console["\u006c\u006f\u0067"](_0x5926ed);}_0x11bfb1['writeImage'](_0x86f147,_0x3417fa);if(_0x11bfb1["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](_0x86f147)){console["\u006c\u006f\u0067"]("\u58c1\u7eb8\u4fdd\u5b58\u6210\u529f\u0021");}else{console['log']("\u3002\u8D25\u5931\u5B58\u4FDD\u7EB8\u58C1".split("").reverse().join(""));}const _0x1b0a41=_0x4cd571["\u0061\u0064\u0064\u0053\u0074\u0061\u0063\u006b"]();const _0x51c8f8=SFSymbol["\u006e\u0061\u006d\u0065\u0064"]("llif.enalprepap".split("").reverse().join(""));const _0x13a2d7=_0x1b0a41['addImage'](_0x51c8f8['image']);_0x13a2d7['imageSize']=new Size(0x12,0x12);_0x13a2d7["\u0074\u0069\u006e\u0074\u0043\u006f\u006c\u006f\u0072"]=Color['white']();_0x13a2d7["\u0075\u0072\u006c"]="".split("").reverse().join("")+_0x2b03da[0x0]["\u0072\u0061\u0077"];_0x1b0a41['useDefaultPadding']();_0x1b0a41["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();Script['setShortcutOutput']("".split("").reverse().join("")+_0x2b03da[0x0]['raw']);Keychain['set']("lru".split("").reverse().join(""),"".split("").reverse().join("")+_0x2b03da[0x3bfc7^0x3bfc7]['raw']);Keychain['set']("\u0063\u0061\u0063\u0068\u0065\u0064\u0054\u0069\u006d\u0065",_0x4fa21a);}else{_0x3417fa=_0x11bfb1["\u0072\u0065\u0061\u0064\u0049\u006d\u0061\u0067\u0065"](_0x86f147);const _0x191743=_0x4cd571['addStack']();const _0x44cbef=SFSymbol["\u006e\u0061\u006d\u0065\u0064"]("\u0070\u0061\u0070\u0065\u0072\u0070\u006c\u0061\u006e\u0065\u002e\u0066\u0069\u006c\u006c");const _0x419fef=_0x191743['addImage'](_0x44cbef["\u0069\u006d\u0061\u0067\u0065"]);_0x419fef['imageSize']=new Size(0x12,0x12);_0x419fef["\u0074\u0069\u006e\u0074\u0043\u006f\u006c\u006f\u0072"]=Color['white']();_0x419fef['url']=Keychain["\u0067\u0065\u0074"]('url');Script['setShortcutOutput'](""+_0x419fef['url']);_0x191743['useDefaultPadding']();_0x191743['addSpacer']();}_0x4cd571["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();const _0x145156=_0x4cd571["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](_0x4fa21a);_0x145156['font']=Font['boldRoundedSystemFont'](0x10);_0x145156["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=Color['white']();_0x145156["\u006c\u0065\u0066\u0074\u0041\u006c\u0069\u0067\u006e\u0054\u0065\u0078\u0074"]();const _0x3b1035=async(_0x498382,_0x396df8=0.1)=>{const _0x2182d8=new DrawContext();_0x2182d8['size']=_0x498382["\u0073\u0069\u007a\u0065"];_0x2182d8["\u0064\u0072\u0061\u0077\u0049\u006d\u0061\u0067\u0065\u0049\u006e\u0052\u0065\u0063\u0074"](_0x498382,new Rect(0xdc997^0xdc997,0x0,_0x498382['size']['width'],_0x498382['size']['height']));_0x2182d8['setFillColor'](new Color("\u0023\u0030\u0030\u0030\u0030\u0030\u0030",_0x396df8));_0x2182d8['fillRect'](new Rect(0x0,0x2f1ac^0x2f1ac,_0x498382["\u0073\u0069\u007a\u0065"]['width'],_0x498382['size']["\u0068\u0065\u0069\u0067\u0068\u0074"]));return await _0x2182d8['getImage']();};let _0x3370e9=await _0x3b1035(_0x3417fa);_0x4cd571["\u0062\u0061\u0063\u006b\u0067\u0072\u006f\u0075\u006e\u0064\u0049\u006d\u0061\u0067\u0065"]=_0x3370e9;const _0x1fbfa4=new Date();_0x169e20["\u0072\u0065\u0066\u0072\u0065\u0073\u0068\u0041\u0066\u0074\u0065\u0072\u0044\u0061\u0074\u0065"]=new Date(_0x1fbfa4['getFullYear'](),_0x1fbfa4['getMonth'](),_0x1fbfa4['getDate'](),_0x1fbfa4['getHours']()+0x1);return _0x169e20;}async function getImgUrl(){const _0x5a635d=[];const _0x4bb21d=Keychain['get']("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e")||"";const _0x25dbcf=await randomLabel();const _0x381cbf=await randomNumber();const _0x5a5734='https://api.unsplash.com/search/photos/';let _0x3c8529="".split("").reverse().join("");const _0x1bef29={"\u0063\u006c\u0069\u0065\u006e\u0074\u005f\u0069\u0064":_0x4bb21d,"\u0071\u0075\u0065\u0072\u0079":_0x25dbcf,"\u0070\u0061\u0067\u0065":0x1,"\u0070\u0065\u0072\u005f\u0070\u0061\u0067\u0065":0x18,'orientation':"\u0073\u0071\u0075\u0061\u0072\u0069\u0073\u0068","\u006f\u0072\u0064\u0065\u0072\u005f\u0062\u0079":'relevant'};for(const[_0x3386b4,_0x320bca]of Object['entries'](_0x1bef29)){_0x3c8529+=_0x3386b4+"\u003d"+_0x320bca+'&';}const _0x120088=_0x5a5734+'?'+_0x3c8529["\u0073\u006c\u0069\u0063\u0065"](0xc8643^0xc8643,-(0x2d439^0x2d438));try{const _0x45b551=new Request(_0x120088);const _0x5a8dab=await _0x45b551['loadJSON']();const _0x5697a3=await _0x5a8dab["\u0072\u0065\u0073\u0075\u006c\u0074\u0073"][_0x381cbf]['urls'];_0x5a635d['push'](_0x5697a3);return _0x5a635d;}catch(_0x5d7a5a){console['log'](_0x5d7a5a);return null;}}async function randomLabel(){const _0x4433e1=Keychain['get']("gat".split("").reverse().join(""))||"\u0057\u0061\u006c\u006c\u0070\u0061\u0070\u0065\u0072\u0073\u002c\u004e\u0061\u0074\u0075\u0072\u0065";const _0x167a7b=_0x4433e1['split'](',');const _0x3632d4=_0x167a7b;const _0x1d3a75=_0x3632d4['length'];return _0x3632d4[Math["\u0066\u006c\u006f\u006f\u0072"](Math['random']()*_0x1d3a75)];}async function randomNumber(){const _0x3585ee=Math["\u0066\u006c\u006f\u006f\u0072"](Math['random']()*(0xac81e^0xac806));return _0x3585ee;}async function getRandomPic(_0x17156c){try{const _0x4b6341=_0x17156c[0x0]['regular'];const _0x1b7bdd=new Request(_0x4b6341);const _0x515b7f=await _0x1b7bdd['loadImage']();return _0x515b7f;}catch(_0x33e55b){console['error']("\u3002\u786E\u6B63\u5199\u586B\u5426\u662FyeK sseccA\u662F\u5176\u5C24\uFF0C\u5F0F\u683C\u53CA\u6570\u53C2\u67E5\u68C0\u8BF7\uFF0C\u7EB8\u58C1\u673A\u968FhsalpsnU\u5230\u53D6\u83B7\u672A".split("").reverse().join(""));console["\u006c\u006f\u0067"](_0x33e55b);return null;}}