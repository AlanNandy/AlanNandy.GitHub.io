// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: purple; icon-glyph: newspaper;
// 更多内容请关注公众号 @Nandelion
// 故宫博物院壁纸栏目：https://www.dpm.org.cn/lights/royal.html
const fileManager=FileManager["\u006c\u006f\u0063\u0061\u006c"]();const cacheDir=fileManager["\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079"]();const verseCacheKey="\u0074\u006f\u0064\u0061\u0079\u005f\u0070\u006f\u0065\u006d\u005f\u0076\u0065\u0072\u0073\u0065";const verseCachePath=fileManager["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](cacheDir,verseCacheKey);const imageCacheKey="egami_gb_meop_yadot".split("").reverse().join("");const imageCachePath=fileManager["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](cacheDir,imageCacheKey);const loadVerse=async()=>{let _0x218e6c=null;try{console['log']('Loading\x20verse\x20from\x20network');_0x218e6c=await(await new Request("\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0076\u0031\u002e\u006a\u0069\u006e\u0072\u0069\u0073\u0068\u0069\u0063\u0069\u002e\u0063\u006f\u006d\u002f\u0061\u006c\u006c\u002e\u006a\u0073\u006f\u006e"))['loadJSON']();fileManager["\u0077\u0072\u0069\u0074\u0065\u0053\u0074\u0072\u0069\u006e\u0067"](verseCachePath,JSON["\u0073\u0074\u0072\u0069\u006e\u0067\u0069\u0066\u0079"](_0x218e6c));console["\u006c\u006f\u0067"]('Verse\x20saved\x20to\x20cache');}catch(_0x180200){console['log']('Failed\x20to\x20load\x20verse\x20from\x20network:',_0x180200);if(fileManager["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](verseCachePath)){console["\u006c\u006f\u0067"]('Loading\x20verse\x20from\x20cache\x20(fallback)');try{_0x218e6c=JSON["\u0070\u0061\u0072\u0073\u0065"](fileManager['readString'](verseCachePath));}catch(_0x10eebb){console["\u006c\u006f\u0067"]('Failed\x20to\x20parse\x20cached\x20verse:',_0x10eebb);_0x218e6c=null;}}else{console["\u006c\u006f\u0067"]('No\x20verse\x20cache\x20available');}}return _0x218e6c??{"\u0063\u006f\u006e\u0074\u0065\u006e\u0074":"\u52a0\u8f7d\u5931\u8d25","\u006f\u0072\u0069\u0067\u0069\u006e":'加载失败'};};const{content:randomVerse,origin:title}=await loadVerse();const loadRandomBg=async()=>{const _0x459cbc=["8/ezis_gmi/829632/di/egami_sthgil/daolnwod/nc.gro.mpd.www//:sptth".split("").reverse().join(""),"8/ezis_gmi/236732/di/egami_sthgil/daolnwod/nc.gro.mpd.www//:sptth".split("").reverse().join(""),"8/ezis_gmi/049632/di/egami_sthgil/daolnwod/nc.gro.mpd.www//:sptth".split("").reverse().join(""),"\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0064\u0070\u006d\u002e\u006f\u0072\u0067\u002e\u0063\u006e\u002f\u0064\u006f\u0077\u006e\u006c\u006f\u0061\u0064\u002f\u006c\u0069\u0067\u0068\u0074\u0073\u005f\u0069\u006d\u0061\u0067\u0065\u002f\u0069\u0064\u002f\u0032\u0033\u0036\u0039\u0034\u0037\u002f\u0069\u006d\u0067\u005f\u0073\u0069\u007a\u0065\u002f\u0038","8/ezis_gmi/914732/di/egami_sthgil/daolnwod/nc.gro.mpd.www//:sptth".split("").reverse().join(""),"\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0064\u0070\u006d\u002e\u006f\u0072\u0067\u002e\u0063\u006e\u002f\u0064\u006f\u0077\u006e\u006c\u006f\u0061\u0064\u002f\u006c\u0069\u0067\u0068\u0074\u0073\u005f\u0069\u006d\u0061\u0067\u0065\u002f\u0069\u0064\u002f\u0032\u0033\u0037\u0034\u0032\u0033\u002f\u0069\u006d\u0067\u005f\u0073\u0069\u007a\u0065\u002f\u0038","\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0064\u0070\u006d\u002e\u006f\u0072\u0067\u002e\u0063\u006e\u002f\u0064\u006f\u0077\u006e\u006c\u006f\u0061\u0064\u002f\u006c\u0069\u0067\u0068\u0074\u0073\u005f\u0069\u006d\u0061\u0067\u0065\u002f\u0069\u0064\u002f\u0032\u0033\u0037\u0034\u0033\u0030\u002f\u0069\u006d\u0067\u005f\u0073\u0069\u007a\u0065\u002f\u0038","\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0064\u0070\u006d\u002e\u006f\u0072\u0067\u002e\u0063\u006e\u002f\u0064\u006f\u0077\u006e\u006c\u006f\u0061\u0064\u002f\u006c\u0069\u0067\u0068\u0074\u0073\u005f\u0069\u006d\u0061\u0067\u0065\u002f\u0069\u0064\u002f\u0032\u0033\u0037\u0036\u0037\u0036\u002f\u0069\u006d\u0067\u005f\u0073\u0069\u007a\u0065\u002f\u0038","\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0064\u0070\u006d\u002e\u006f\u0072\u0067\u002e\u0063\u006e\u002f\u0064\u006f\u0077\u006e\u006c\u006f\u0061\u0064\u002f\u006c\u0069\u0067\u0068\u0074\u0073\u005f\u0069\u006d\u0061\u0067\u0065\u002f\u0069\u0064\u002f\u0032\u0033\u0037\u0034\u0034\u0030\u002f\u0069\u006d\u0067\u005f\u0073\u0069\u007a\u0065\u002f\u0038","8/ezis_gmi/585732/di/egami_sthgil/daolnwod/nc.gro.mpd.www//:sptth".split("").reverse().join(""),"\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0077\u0077\u0077\u002e\u0064\u0070\u006d\u002e\u006f\u0072\u0067\u002e\u0063\u006e\u002f\u0064\u006f\u0077\u006e\u006c\u006f\u0061\u0064\u002f\u006c\u0069\u0067\u0068\u0074\u0073\u005f\u0069\u006d\u0061\u0067\u0065\u002f\u0069\u0064\u002f\u0032\u0033\u0037\u0035\u0038\u0033\u002f\u0069\u006d\u0067\u005f\u0073\u0069\u007a\u0065\u002f\u0038"];const _0x200a98=new Date()['getDate']()%(0xd6e34^0xd6e3f);const _0x806a2b=_0x459cbc[_0x200a98];if(fileManager["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](imageCachePath)){const _0x3d7ad3=fileManager["\u0063\u0072\u0065\u0061\u0074\u0069\u006f\u006e\u0044\u0061\u0074\u0065"](imageCachePath);const _0x313e9e=new Date();if(_0x3d7ad3["\u0067\u0065\u0074\u0046\u0075\u006c\u006c\u0059\u0065\u0061\u0072"]()===_0x313e9e["\u0067\u0065\u0074\u0046\u0075\u006c\u006c\u0059\u0065\u0061\u0072"]()&&_0x3d7ad3["\u0067\u0065\u0074\u004d\u006f\u006e\u0074\u0068"]()===_0x313e9e['getMonth']()&&_0x3d7ad3["\u0067\u0065\u0074\u0044\u0061\u0074\u0065"]()===_0x313e9e["\u0067\u0065\u0074\u0044\u0061\u0074\u0065"]()){console['log']('Loading\x20image\x20from\x20cache');return Image['fromFile'](imageCachePath);}else{console["\u006c\u006f\u0067"]('Image\x20cache\x20expired,\x20deleting');fileManager["\u0072\u0065\u006d\u006f\u0076\u0065"](imageCachePath);}}console["\u006c\u006f\u0067"]('Loading\x20image\x20from\x20network');const _0xd7ca7a=await new Request(_0x806a2b)["\u006c\u006f\u0061\u0064\u0049\u006d\u0061\u0067\u0065"]();fileManager['writeImage'](imageCachePath,_0xd7ca7a);console["\u006c\u006f\u0067"]('Image\x20saved\x20to\x20cache');return _0xd7ca7a;};const basewidget=new ListWidget();basewidget['setPadding'](0x220de^0x220de,0x19c06^0x19c06,0x93e37^0x93e37,0x45366^0x45366);const widget=basewidget['addStack']();widget["\u0073\u0065\u0074\u0050\u0061\u0064\u0064\u0069\u006e\u0067"](0xcce30^0xcce20,0x2aadc^0x2aacc,0x26422^0x26432,0x753e2^0x753f2);widget["\u006c\u0061\u0079\u006f\u0075\u0074\u0056\u0065\u0072\u0074\u0069\u0063\u0061\u006c\u006c\u0079"]();widget['backgroundImage']=await loadRandomBg();const today=new Date();const day=today["\u0067\u0065\u0074\u0044\u0061\u0074\u0065"]();const weekday=today["\u0074\u006f\u004c\u006f\u0063\u0061\u006c\u0065\u0053\u0074\u0072\u0069\u006e\u0067"]("NC-hz".split("").reverse().join(""),{"\u0077\u0065\u0065\u006b\u0064\u0061\u0079":"\u006c\u006f\u006e\u0067"});if(config["\u0077\u0069\u0064\u0067\u0065\u0074\u0046\u0061\u006d\u0069\u006c\u0079"]=="\u0073\u006d\u0061\u006c\u006c"){const dayStack=widget["\u0061\u0064\u0064\u0053\u0074\u0061\u0063\u006b"]();dayStack['addSpacer']();widget["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();const titleText=widget['addText']("\u300a"+title+"\u300b");titleText["\u006c\u0069\u006e\u0065\u004c\u0069\u006d\u0069\u0074"]=0xbd4fd^0xbd4fc;titleText['textColor']=new Color("10F050#".split("").reverse().join(""));titleText['font']=new Font("uC-oaDgnehZneMgnaP".split("").reverse().join(""),0x4ee24^0x4ee2b);const verseText=widget["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](randomVerse);verseText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("\u0023\u0030\u0035\u0030\u0046\u0030\u0031");verseText['font']=new Font("uC-oaDgnehZneMgnaP".split("").reverse().join(""),0x24e67^0x24e68);}else if(config["\u0077\u0069\u0064\u0067\u0065\u0074\u0046\u0061\u006d\u0069\u006c\u0079"]=="muidem".split("").reverse().join("")){const dayStack=widget['addStack']();const dayText=dayStack['addText'](''+day);dayText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("\u0023\u0030\u0035\u0030\u0046\u0030\u0031");dayText["\u0066\u006f\u006e\u0074"]=new Font("\u0050\u0061\u006e\u0067\u004d\u0065\u006e\u005a\u0068\u0065\u006e\u0067\u0044\u0061\u006f\u002d\u0043\u0075",0xe7564^0xe7540);dayStack['addSpacer']();const weekdayText=widget['addText'](''+weekday);weekdayText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("10F050#".split("").reverse().join(""));weekdayText["\u0066\u006f\u006e\u0074"]=new Font("\u0050\u0061\u006e\u0067\u004d\u0065\u006e\u005a\u0068\u0065\u006e\u0067\u0044\u0061\u006f\u002d\u0043\u0075",0x7edc0^0x7edcc);widget["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();const titleText=widget['addText']("\u300a"+title+"\u300b");titleText["\u006c\u0069\u006e\u0065\u004c\u0069\u006d\u0069\u0074"]=0xddc4a^0xddc4b;titleText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("10F050#".split("").reverse().join(""));titleText['font']=new Font("\u0050\u0061\u006e\u0067\u004d\u0065\u006e\u005a\u0068\u0065\u006e\u0067\u0044\u0061\u006f\u002d\u0043\u0075",0xb17b7^0xb17b8);const verseText=widget['addText'](randomVerse);verseText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("10F050#".split("").reverse().join(""));verseText["\u0066\u006f\u006e\u0074"]=new Font("\u0050\u0061\u006e\u0067\u004d\u0065\u006e\u005a\u0068\u0065\u006e\u0067\u0044\u0061\u006f\u002d\u0043\u0075",0x6255f^0x62550);}else{const dayStack=widget["\u0061\u0064\u0064\u0053\u0074\u0061\u0063\u006b"]();const dayText=dayStack['addText'](''+day);dayText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("10F050#".split("").reverse().join(""));dayText['font']=new Font("uC-oaDgnehZneMgnaP".split("").reverse().join(""),0xb2b7f^0xb2b47);dayStack["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();const weekdayText=widget["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](''+weekday);weekdayText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("\u0023\u0030\u0035\u0030\u0046\u0030\u0031");weekdayText["\u0066\u006f\u006e\u0074"]=new Font("\u0050\u0061\u006e\u0067\u004d\u0065\u006e\u005a\u0068\u0065\u006e\u0067\u0044\u0061\u006f\u002d\u0043\u0075",0x349b4^0x349bb);widget["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();const titleText=widget['addText']("\u300a"+title+"\u300b");titleText['textColor']=new Color("\u0023\u0030\u0035\u0030\u0046\u0030\u0031");titleText["\u0066\u006f\u006e\u0074"]=new Font("\u0050\u0061\u006e\u0067\u004d\u0065\u006e\u005a\u0068\u0065\u006e\u0067\u0044\u0061\u006f\u002d\u0043\u0075",0xdc737^0xdc726);const verseText=widget["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](randomVerse);verseText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=new Color("\u0023\u0030\u0035\u0030\u0046\u0030\u0031");verseText["\u0066\u006f\u006e\u0074"]=new Font("uC-oaDgnehZneMgnaP".split("").reverse().join(""),0xb7915^0xb7904);}basewidget['refreshAfterDate']=new Date(today['getFullYear'](),today['getMonth'](),today["\u0067\u0065\u0074\u0044\u0061\u0074\u0065"](),today["\u0067\u0065\u0074\u0048\u006f\u0075\u0072\u0073"]()+(0x3b8f3^0x3b8f2));Script['setWidget'](basewidget);Script["\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065"]();