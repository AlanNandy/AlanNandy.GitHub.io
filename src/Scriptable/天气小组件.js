// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: orange; icon-glyph: sun;
// 更多内容请关注公众号 @Nandelion
const parameters=args["\u0070\u006c\u0061\u0069\u006e\u0054\u0065\u0078\u0074\u0073"][0x74f32^0x74f32]||'';if(parameters!=="\u4EE4\u6307\u6377\u5FEB".split("").reverse().join("")&&config["\u0072\u0075\u006e\u0073\u0049\u006e\u0041\u0070\u0070"]){let accessToken;try{accessToken=Keychain['get']("nekoTssecca".split("").reverse().join(""));if(accessToken===null||accessToken===undefined){accessToken='';}}catch(_0x25d7c4){console["\u006c\u006f\u0067"](_0x25d7c4);accessToken='';}let accessTokenbaiduMap;try{accessTokenbaiduMap=Keychain["\u0067\u0065\u0074"]("paMudiabnekoTssecca".split("").reverse().join(""));if(accessTokenbaiduMap===null||accessTokenbaiduMap===undefined){accessTokenbaiduMap='';}}catch(_0x4110f1){console["\u006c\u006f\u0067"](_0x4110f1);accessTokenbaiduMap='';}let accessTokenqweather;try{accessTokenqweather=Keychain["\u0067\u0065\u0074"]("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e\u0071\u0077\u0065\u0061\u0074\u0068\u0065\u0072");if(accessTokenqweather===null||accessTokenqweather===undefined){accessTokenqweather='';}}catch(_0x5a993b){console['log'](_0x5a993b);accessTokenqweather='';}let tag;try{tag=Keychain["\u0067\u0065\u0074"]("gat".split("").reverse().join(""));if(tag===null||tag===undefined){tag='';}}catch(_0x5534d4){console['log'](_0x5534d4);tag="rehtaeW".split("").reverse().join("");}let alert=new Alert();alert["\u0074\u0069\u0074\u006c\u0065"]="\u8bf7\u586b\u5199\u53c2\u6570";alert["\u006d\u0065\u0073\u0073\u0061\u0067\u0065"]='①\x20获取Unsplash密钥请前往：\x0a\x20https://unsplash.com/oauth/applications\x20\x0a②\x20获取百度地图密钥请前往：\x0a\x20https://lbsyun.baidu.com/\x20\x0a③\x20获取和风天气密钥请前往：\x0a\x20https://qweather.com/\x20\x0a④\x20以上密钥均为必填项。';alert["\u0061\u0064\u0064\u0054\u0065\u0078\u0074\u0046\u0069\u0065\u006c\u0064"]('Unsplash的Access\x20Key',accessToken||'');alert["\u0061\u0064\u0064\u0054\u0065\u0078\u0074\u0046\u0069\u0065\u006c\u0064"]('百度地图的Access\x20Key',accessTokenbaiduMap||'');alert['addTextField']('和风天气的Access\x20Key',accessTokenqweather||'');alert["\u0061\u0064\u0064\u0041\u0063\u0074\u0069\u006f\u006e"]("\u5B9A\u786E".split("").reverse().join(""));let response=await alert["\u0070\u0072\u0065\u0073\u0065\u006e\u0074\u0041\u006c\u0065\u0072\u0074"]();let userInput1=alert["\u0074\u0065\u0078\u0074\u0046\u0069\u0065\u006c\u0064\u0056\u0061\u006c\u0075\u0065"](0xd41dd^0xd41dd)['trim']();let userInput2=alert["\u0074\u0065\u0078\u0074\u0046\u0069\u0065\u006c\u0064\u0056\u0061\u006c\u0075\u0065"](0x7c388^0x7c389)["\u0074\u0072\u0069\u006d"]();let userInput3=alert["\u0074\u0065\u0078\u0074\u0046\u0069\u0065\u006c\u0064\u0056\u0061\u006c\u0075\u0065"](0xa1df4^0xa1df6)['trim']();Keychain['set']("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e",userInput1);Keychain["\u0073\u0065\u0074"]("paMudiabnekoTssecca".split("").reverse().join(""),userInput2);Keychain['set']("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e\u0071\u0077\u0065\u0061\u0074\u0068\u0065\u0072",userInput3);Keychain["\u0073\u0065\u0074"]("\u0074\u0061\u0067","\u0057\u0065\u0061\u0074\u0068\u0065\u0072");}const widget=await createWidget();Script["\u0073\u0065\u0074\u0057\u0069\u0064\u0067\u0065\u0074"](widget);async function createWidget(_0x11ec5b,_0x161aeb){const _0x90b382=new ListWidget();_0x90b382['setPadding'](0x4c922^0x4c922,0xa882e^0xa882e,0x3482d^0x3482d,0x312c8^0x312c8);const _0x2a9425=_0x90b382["\u0061\u0064\u0064\u0053\u0074\u0061\u0063\u006b"]();_0x2a9425["\u0073\u0065\u0074\u0050\u0061\u0064\u0064\u0069\u006e\u0067"](0xa499d^0xa498d,0xd5a8c^0xd5a9c,0x465ab^0x465bb,0x27742^0x27752);_0x2a9425['layoutVertically']();const _0x425c9f=new Date()['toLocaleString']("hz".split("").reverse().join(""),{"\u006d\u006f\u006e\u0074\u0068":'short','day':"\u006e\u0075\u006d\u0065\u0072\u0069\u0063","\u0077\u0065\u0065\u006b\u0064\u0061\u0079":"\u0073\u0068\u006f\u0072\u0074","\u0068\u006f\u0075\u0072":"\u006e\u0075\u006d\u0065\u0072\u0069\u0063"});try{_0x11ec5b=Keychain['get']("emiTdehcac".split("").reverse().join(""));if(_0x11ec5b===null||_0x11ec5b===undefined){_0x11ec5b="\u0064\u0065\u0066\u0061\u0075\u006c\u0074\u0054\u0069\u006d\u0065";}}catch(_0x177032){console["\u006c\u006f\u0067"](_0x177032);_0x11ec5b="\u0064\u0065\u0066\u0061\u0075\u006c\u0074\u0054\u0069\u006d\u0065";}let _0x2bc10b=FileManager["\u006c\u006f\u0063\u0061\u006c"]();let _0x575cd0=_0x2bc10b["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](_0x2bc10b["\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079"](),"\u0055\u006e\u0073\u0070\u006c\u0061\u0073\u0068\u968f\u673a\u58c1\u7eb8");if(!_0x2bc10b["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](_0x575cd0)){_0x2bc10b["\u0063\u0072\u0065\u0061\u0074\u0065\u0044\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079"](_0x575cd0);}let _0x57c8dc=_0x2bc10b["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](_0x575cd0,"\u0055\u006e\u0073\u0070\u006c\u0061\u0073\u0068\u968f\u673a\u58c1\u7eb8\u002e\u006a\u0070\u0065\u0067");if(_0x425c9f!==_0x11ec5b||!_0x2bc10b["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](_0x57c8dc)){const _0x290b23=await Location["\u0063\u0075\u0072\u0072\u0065\u006e\u0074"]();const _0x2d6d8d=[_0x290b23["\u006c\u006f\u006e\u0067\u0069\u0074\u0075\u0064\u0065"],_0x290b23['latitude']];const _0x311008=Keychain["\u0067\u0065\u0074"]("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e\u0071\u0077\u0065\u0061\u0074\u0068\u0065\u0072")||'';const _0x304f73=await getWeatherData(_0x2d6d8d,_0x311008);const _0x19b299=_0x304f73["\u0063\u0068\u0069\u006e\u0065\u0073\u0065"];const _0x3d605d=Keychain["\u0067\u0065\u0074"]("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e\u0062\u0061\u0069\u0064\u0075\u004d\u0061\u0070")||'';const _0x584ffa=await getRealLocation(_0x2d6d8d,_0x3d605d);const _0x261997=_0x19b299['now']["\u0074\u0065\u0078\u0074"]+'\x20'+_0x19b299['now']["\u0074\u0065\u006d\u0070"]["\u0074\u006f\u0053\u0074\u0072\u0069\u006e\u0067"]()+'°\x20风力'+_0x19b299["\u006e\u006f\u0077"]['windScale']['toString']()+"\u7ea7";const _0xa7e466=_0x304f73["\u0065\u006e\u0067\u006c\u0069\u0073\u0068"];const _0x7a078b=_0xa7e466['now']['text']["\u0074\u006f\u0053\u0074\u0072\u0069\u006e\u0067"]();Keychain['set']("\u0074\u0061\u0067",_0x7a078b);const _0x4bdb90=await getImgUrl();try{_0x161aeb=await getRandomPic(_0x4bdb90);}catch(_0x5df92e){console["\u006c\u006f\u0067"](_0x5df92e);}_0x2bc10b['writeImage'](_0x57c8dc,_0x161aeb);if(_0x2bc10b['fileExists'](_0x57c8dc)){console['log']("!\u529F\u6210\u5B58\u4FDD\u7EB8\u58C1".split("").reverse().join(""));}else{console['log']("\u3002\u8D25\u5931\u5B58\u4FDD\u7EB8\u58C1".split("").reverse().join(""));}const _0x592816=_0x2a9425["\u0061\u0064\u0064\u0053\u0074\u0061\u0063\u006b"]();const _0x45d230=SFSymbol['named']("\u0070\u0061\u0070\u0065\u0072\u0070\u006c\u0061\u006e\u0065\u002e\u0066\u0069\u006c\u006c");const _0x51ec12=_0x592816["\u0061\u0064\u0064\u0049\u006d\u0061\u0067\u0065"](_0x45d230["\u0069\u006d\u0061\u0067\u0065"]);_0x51ec12['imageSize']=new Size(0x6f9fd^0x6f9ef,0x8cb37^0x8cb25);_0x51ec12["\u0074\u0069\u006e\u0074\u0043\u006f\u006c\u006f\u0072"]=Color['white']();_0x51ec12['url']=''+_0x4bdb90[0xec2cf^0xec2cf]["\u0072\u0061\u0077"];_0x592816["\u0075\u0073\u0065\u0044\u0065\u0066\u0061\u0075\u006c\u0074\u0050\u0061\u0064\u0064\u0069\u006e\u0067"]();_0x592816["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();Script['setShortcutOutput'](''+_0x4bdb90[0x50380^0x50380]['raw']);Keychain["\u0073\u0065\u0074"]("\u0075\u0072\u006c",''+_0x4bdb90[0xae76b^0xae76b]['raw']);Keychain["\u0073\u0065\u0074"]("\u0063\u0061\u0063\u0068\u0065\u0064\u0054\u0069\u006d\u0065",_0x425c9f);_0x2a9425['addSpacer']();const _0x27b36c=_0x2a9425['addText'](new Date()["\u0074\u006f\u004c\u006f\u0063\u0061\u006c\u0065\u0053\u0074\u0072\u0069\u006e\u0067"]("\u007a\u0068",{'month':'short',"\u0064\u0061\u0079":"\u006e\u0075\u006d\u0065\u0072\u0069\u0063","\u0077\u0065\u0065\u006b\u0064\u0061\u0079":'short'}));_0x27b36c['font']=Font['boldRoundedSystemFont'](0xd5257^0xd5247);_0x27b36c['textColor']=Color['white']();_0x27b36c['leftAlignText']();const _0x4ebe74=_0x2a9425['addText'](_0x584ffa+'\x20'+_0x261997);_0x4ebe74["\u0066\u006f\u006e\u0074"]=Font['boldRoundedSystemFont'](0x364fb^0x364eb);_0x4ebe74['textColor']=Color["\u0077\u0068\u0069\u0074\u0065"]();_0x4ebe74["\u006c\u0065\u0066\u0074\u0041\u006c\u0069\u0067\u006e\u0054\u0065\u0078\u0074"]();Keychain["\u0073\u0065\u0074"]("2txeT".split("").reverse().join(""),_0x584ffa+'\x20'+_0x261997);}else{_0x161aeb=_0x2bc10b["\u0072\u0065\u0061\u0064\u0049\u006d\u0061\u0067\u0065"](_0x57c8dc);const _0x515fbe=_0x2a9425["\u0061\u0064\u0064\u0053\u0074\u0061\u0063\u006b"]();const _0x169ec1=SFSymbol["\u006e\u0061\u006d\u0065\u0064"]("llif.enalprepap".split("").reverse().join(""));const _0x52c58f=_0x515fbe['addImage'](_0x169ec1["\u0069\u006d\u0061\u0067\u0065"]);_0x52c58f["\u0069\u006d\u0061\u0067\u0065\u0053\u0069\u007a\u0065"]=new Size(0x8f10b^0x8f119,0x79f41^0x79f53);_0x52c58f["\u0074\u0069\u006e\u0074\u0043\u006f\u006c\u006f\u0072"]=Color['white']();_0x52c58f["\u0075\u0072\u006c"]=Keychain["\u0067\u0065\u0074"]("lru".split("").reverse().join(""));Script['setShortcutOutput'](''+_0x52c58f["\u0075\u0072\u006c"]);_0x515fbe["\u0075\u0073\u0065\u0044\u0065\u0066\u0061\u0075\u006c\u0074\u0050\u0061\u0064\u0064\u0069\u006e\u0067"]();_0x515fbe['addSpacer']();_0x2a9425['addSpacer']();const _0x9a56af=_0x2a9425["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](new Date()["\u0074\u006f\u004c\u006f\u0063\u0061\u006c\u0065\u0053\u0074\u0072\u0069\u006e\u0067"]("hz".split("").reverse().join(""),{"\u006d\u006f\u006e\u0074\u0068":"\u0073\u0068\u006f\u0072\u0074","\u0064\u0061\u0079":"\u006e\u0075\u006d\u0065\u0072\u0069\u0063",'weekday':'short'}));_0x9a56af["\u0066\u006f\u006e\u0074"]=Font['boldRoundedSystemFont'](0x76b44^0x76b54);_0x9a56af['textColor']=Color['white']();_0x9a56af["\u006c\u0065\u0066\u0074\u0041\u006c\u0069\u0067\u006e\u0054\u0065\u0078\u0074"]();let _0x247bf8;try{_0x247bf8=Keychain['get']("\u0054\u0065\u0078\u0074\u0032");if(_0x247bf8===null||_0x247bf8===undefined){_0x247bf8='';}}catch(_0x208b17){console['log']('Error\x20reading\x20Keychain\x20value:',_0x208b17);_0x247bf8='';}const _0x33d11b=_0x2a9425['addText'](_0x247bf8);_0x33d11b["\u0066\u006f\u006e\u0074"]=Font["\u0062\u006f\u006c\u0064\u0052\u006f\u0075\u006e\u0064\u0065\u0064\u0053\u0079\u0073\u0074\u0065\u006d\u0046\u006f\u006e\u0074"](0xd94a1^0xd94b1);_0x33d11b['textColor']=Color['white']();_0x33d11b["\u006c\u0065\u0066\u0074\u0041\u006c\u0069\u0067\u006e\u0054\u0065\u0078\u0074"]();}const _0x387aa9=async(_0x4b5fce,_0x79413=0.1)=>{const _0x2aaaaf=new DrawContext();_0x2aaaaf['size']=_0x4b5fce["\u0073\u0069\u007a\u0065"];_0x2aaaaf["\u0064\u0072\u0061\u0077\u0049\u006d\u0061\u0067\u0065\u0049\u006e\u0052\u0065\u0063\u0074"](_0x4b5fce,new Rect(0xdcd79^0xdcd79,0xf34f0^0xf34f0,_0x4b5fce['size']['width'],_0x4b5fce["\u0073\u0069\u007a\u0065"]["\u0068\u0065\u0069\u0067\u0068\u0074"]));_0x2aaaaf["\u0073\u0065\u0074\u0046\u0069\u006c\u006c\u0043\u006f\u006c\u006f\u0072"](new Color("\u0023\u0030\u0030\u0030\u0030\u0030\u0030",_0x79413));_0x2aaaaf["\u0066\u0069\u006c\u006c\u0052\u0065\u0063\u0074"](new Rect(0xcd985^0xcd985,0x646cf^0x646cf,_0x4b5fce["\u0073\u0069\u007a\u0065"]['width'],_0x4b5fce['size']['height']));return await _0x2aaaaf["\u0067\u0065\u0074\u0049\u006d\u0061\u0067\u0065"]();};let _0x598921=await _0x387aa9(_0x161aeb);_0x2a9425['backgroundImage']=_0x598921;const _0x188ba1=new Date();_0x90b382['refreshAfterDate']=new Date(_0x188ba1["\u0067\u0065\u0074\u0046\u0075\u006c\u006c\u0059\u0065\u0061\u0072"](),_0x188ba1["\u0067\u0065\u0074\u004d\u006f\u006e\u0074\u0068"](),_0x188ba1["\u0067\u0065\u0074\u0044\u0061\u0074\u0065"](),_0x188ba1["\u0067\u0065\u0074\u0048\u006f\u0075\u0072\u0073"]()+(0xe1d73^0xe1d72));return _0x90b382;}async function getImgUrl(_0x1a5961,_0x914834){const _0x3f469c=[];const _0x802c09=Keychain['get']("\u0061\u0063\u0063\u0065\u0073\u0073\u0054\u006f\u006b\u0065\u006e")||'';const _0x5736d1=await randomLabel();const _0x3a217a=await randomNumber();_0x1a5961="/sotohp/hcraes/moc.hsalpsnu.ipa//:sptth".split("").reverse().join("");_0x914834='';const _0x4ea3b4={'client_id':_0x802c09,"\u0071\u0075\u0065\u0072\u0079":_0x5736d1,"\u0070\u0061\u0067\u0065":0x1,'per_page':0x18,'orientation':'squarish',"\u006f\u0072\u0064\u0065\u0072\u005f\u0062\u0079":"\u0072\u0065\u006c\u0065\u0076\u0061\u006e\u0074"};for(const[_0x316d6b,_0x57656b]of Object["\u0065\u006e\u0074\u0072\u0069\u0065\u0073"](_0x4ea3b4)){_0x914834+=_0x316d6b+"\u003d"+_0x57656b+"\u0026";}const _0x159877=_0x1a5961+"\u003f"+_0x914834["\u0073\u006c\u0069\u0063\u0065"](0xa572f^0xa572f,-(0xae623^0xae622));try{const _0x2848e7=new Request(_0x159877);const _0x2d32c1=await _0x2848e7["\u006c\u006f\u0061\u0064\u004a\u0053\u004f\u004e"]();const _0x68e3c6=await _0x2d32c1["\u0072\u0065\u0073\u0075\u006c\u0074\u0073"][_0x3a217a]["\u0075\u0072\u006c\u0073"];_0x3f469c["\u0070\u0075\u0073\u0068"](_0x68e3c6);return _0x3f469c;}catch(_0x5d808a){console["\u006c\u006f\u0067"](_0x5d808a);return null;}}async function randomLabel(){const _0x1d1ae8=Keychain['get']("\u0074\u0061\u0067")||"rehtaeW".split("").reverse().join("");const _0x39b022=_0x1d1ae8['split']("\u002c");const _0x1cf97d=_0x39b022;const _0x199516=_0x1cf97d["\u006c\u0065\u006e\u0067\u0074\u0068"];return _0x1cf97d[Math['floor'](Math['random']()*_0x199516)];}async function randomNumber(){const _0x5f355e=Math["\u0066\u006c\u006f\u006f\u0072"](Math['random']()*(0x9663b^0x96623));return _0x5f355e;}async function getRandomPic(_0x5ac136){try{const _0x432a3a=_0x5ac136[0x33054^0x33054]["\u0072\u0065\u0067\u0075\u006c\u0061\u0072"];const _0x466d97=new Request(_0x432a3a);const _0x1badb1=await _0x466d97['loadImage']();return _0x1badb1;}catch(_0x17c4d5){console['error']('未获取到Unsplash随机壁纸，请检查参数及格式，尤其是Access\x20Key是否填写正确。');console["\u006c\u006f\u0067"](_0x17c4d5);return null;}}async function getWeatherData(_0x58df44,_0x576892){const _0x457fda="\u0068\u0074\u0074\u0070\u0073\u003a\u002f\u002f\u0064\u0065\u0076\u0061\u0070\u0069\u002e\u0071\u0077\u0065\u0061\u0074\u0068\u0065\u0072\u002e\u0063\u006f\u006d\u002f\u0076\u0037\u002f\u0077\u0065\u0061\u0074\u0068\u0065\u0072\u002f\u006e\u006f\u0077\u003f\u006b\u0065\u0079\u003d"+_0x576892+"=noitacol&".split("").reverse().join("")+_0x58df44['join']("\u002c");try{const _0x574fff=new Request(_0x457fda+"snah-hz=gnal&".split("").reverse().join(""));const _0xc709ea=await _0x574fff['loadJSON']();const _0x6eff40=new Request(_0x457fda+"ne=gnal&".split("").reverse().join(""));const _0x3b8aec=await _0x6eff40["\u006c\u006f\u0061\u0064\u004a\u0053\u004f\u004e"]();return{"\u0063\u0068\u0069\u006e\u0065\u0073\u0065":_0xc709ea,"\u0065\u006e\u0067\u006c\u0069\u0073\u0068":_0x3b8aec};}catch(_0x27f603){console["\u0065\u0072\u0072\u006f\u0072"](":\u8D25\u5931\u636E\u6570\u6C14\u5929\u53D6\u83B7".split("").reverse().join(""),_0x27f603);throw _0x27f603;}}async function getRealLocation(_0x5d4582,_0x17e77b){const _0x2245b3=_0x5d4582["\u0072\u0065\u0076\u0065\u0072\u0073\u0065"]()["\u006a\u006f\u0069\u006e"]("\u002c");const _0x4b6a86="=ka&ll48sgw=epytdrooc&nosj=tuptuo?/3v/gnidocoeg_esrever/moc.udiab.pam.ipa//:ptth".split("").reverse().join("")+_0x17e77b+"=noitacol&".split("").reverse().join("")+_0x2245b3;const _0x573b46=new Request(_0x4b6a86);const _0x8e3a1d=await _0x573b46["\u006c\u006f\u0061\u0064\u004a\u0053\u004f\u004e"]();const _0x51004a=[_0x8e3a1d['result']["\u0061\u0064\u0064\u0072\u0065\u0073\u0073\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"]['district']];return _0x51004a;}