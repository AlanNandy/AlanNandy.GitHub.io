// Variables used by Scriptable.
// These must be at the very top of the file. Do not edit.
// icon-color: red; icon-glyph: image;
// 更多内容请关注公众号 @Nandelion
const fileManager=FileManager["\u006c\u006f\u0063\u0061\u006c"]();const cacheDir=fileManager["\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u006f\u0072\u0079"]();const imageCachePath=fileManager["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](cacheDir,"egami_repapllaw_gnib".split("").reverse().join(""));const infoCachePath=fileManager["\u006a\u006f\u0069\u006e\u0050\u0061\u0074\u0068"](cacheDir,"ofni_repapllaw_gnib".split("").reverse().join(""));const today=new Date();const beijingTime=today["\u0074\u006f\u004c\u006f\u0063\u0061\u006c\u0065\u0053\u0074\u0072\u0069\u006e\u0067"]("hz".split("").reverse().join(""),{"\u006d\u006f\u006e\u0074\u0068":"\u0073\u0068\u006f\u0072\u0074",'day':'numeric',"\u0077\u0065\u0065\u006b\u0064\u0061\u0079":"\u0073\u0068\u006f\u0072\u0074"});let cachedInfo=fileManager["\u0066\u0069\u006c\u0065\u0045\u0078\u0069\u0073\u0074\u0073"](infoCachePath)?JSON['parse'](fileManager["\u0072\u0065\u0061\u0064\u0053\u0074\u0072\u0069\u006e\u0067"](infoCachePath)):null;let Img,title,ImgURL;if(cachedInfo&&cachedInfo['date']===beijingTime&&fileManager['fileExists'](imageCachePath)){Img=fileManager['readImage'](imageCachePath);title=cachedInfo["\u0074\u0069\u0074\u006c\u0065"];ImgURL=cachedInfo["\u0049\u006d\u0067\u0055\u0052\u004c"];}else{const bingUrl="NC-hz=tkm&1=n&0=xdi&sj=tamrof?xpsa.evihcrAegamIPH/moc.gnib.www//:sptth".split("").reverse().join("");const response=await new Request(bingUrl)["\u006c\u006f\u0061\u0064\u004a\u0053\u004f\u004e"]();const imageUrlBase=response["\u0069\u006d\u0061\u0067\u0065\u0073"][0x979dd^0x979dd]['urlbase'];title=response["\u0069\u006d\u0061\u0067\u0065\u0073"][0x87497^0x87497]['title'];ImgURL="moc.gnib//:sptth".split("").reverse().join("")+imageUrlBase+"gpj.DHU_".split("").reverse().join("");Img=await loadImage(ImgURL);fileManager['writeImage'](imageCachePath,Img);const infoToCache={'date':beijingTime,'title':title,'ImgURL':ImgURL};fileManager["\u0077\u0072\u0069\u0074\u0065\u0053\u0074\u0072\u0069\u006e\u0067"](infoCachePath,JSON["\u0073\u0074\u0072\u0069\u006e\u0067\u0069\u0066\u0079"](infoToCache));}const basewidget=new ListWidget();basewidget['setPadding'](0x464a2^0x464a2,0x198a7^0x198a7,0x8c2d3^0x8c2d3,0xf0f6c^0xf0f6c);const widget=basewidget['addStack']();widget['setPadding'](0x2f65f^0x2f64f,0x42903^0x42913,0x48c90^0x48c80,0xe3742^0xe3752);widget["\u006c\u0061\u0079\u006f\u0075\u0074\u0056\u0065\u0072\u0074\u0069\u0063\u0061\u006c\u006c\u0079"]();const getGreyImg=async(_0xecd799,_0x5f482a=0.1)=>{const _0x1734e1=new DrawContext();_0x1734e1["\u0073\u0069\u007a\u0065"]=_0xecd799['size'];_0x1734e1['drawImageInRect'](_0xecd799,new Rect(0xdc970^0xdc970,0x6aa29^0x6aa29,_0xecd799["\u0073\u0069\u007a\u0065"]["\u0077\u0069\u0064\u0074\u0068"],_0xecd799["\u0073\u0069\u007a\u0065"]['height']));_0x1734e1["\u0073\u0065\u0074\u0046\u0069\u006c\u006c\u0043\u006f\u006c\u006f\u0072"](new Color("000000#".split("").reverse().join(""),_0x5f482a));_0x1734e1['fillRect'](new Rect(0x0,0x0,_0xecd799['size']['width'],_0xecd799['size']['height']));return await _0x1734e1["\u0067\u0065\u0074\u0049\u006d\u0061\u0067\u0065"]();};const greyImg=await getGreyImg(Img);widget['backgroundImage']=greyImg;const iconStack=widget['addStack']();const iconSymbol=SFSymbol["\u006e\u0061\u006d\u0065\u0064"]("llif.enalprepap".split("").reverse().join(""));const headerIcon=iconStack['addImage'](iconSymbol['image']);headerIcon['imageSize']=new Size(0x12,0x12);headerIcon["\u0074\u0069\u006e\u0074\u0043\u006f\u006c\u006f\u0072"]=Color['white']();headerIcon['url']="".split("").reverse().join("")+ImgURL;iconStack['useDefaultPadding']();iconStack['addSpacer']();widget["\u0061\u0064\u0064\u0053\u0070\u0061\u0063\u0065\u0072"]();const timeText=widget["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](beijingTime);timeText["\u0066\u006f\u006e\u0074"]=Font["\u0062\u006f\u006c\u0064\u0052\u006f\u0075\u006e\u0064\u0065\u0064\u0053\u0079\u0073\u0074\u0065\u006d\u0046\u006f\u006e\u0074"](0x10);timeText["\u0074\u0065\u0078\u0074\u0043\u006f\u006c\u006f\u0072"]=Color['white']();timeText["\u006c\u0065\u0066\u0074\u0041\u006c\u0069\u0067\u006e\u0054\u0065\u0078\u0074"]();const titleText=widget["\u0061\u0064\u0064\u0054\u0065\u0078\u0074"](title);titleText["\u0066\u006f\u006e\u0074"]=Font["\u0062\u006f\u006c\u0064\u0052\u006f\u0075\u006e\u0064\u0065\u0064\u0053\u0079\u0073\u0074\u0065\u006d\u0046\u006f\u006e\u0074"](0x23d0b^0x23d1b);titleText['textColor']=Color['white']();titleText['leftAlignText']();basewidget["\u0072\u0065\u0066\u0072\u0065\u0073\u0068\u0041\u0066\u0074\u0065\u0072\u0044\u0061\u0074\u0065"]=new Date(today['getFullYear'](),today["\u0067\u0065\u0074\u004d\u006f\u006e\u0074\u0068"](),today['getDate'](),today["\u0067\u0065\u0074\u0048\u006f\u0075\u0072\u0073"]()+(0xa9a09^0xa9a08));Script['setWidget'](basewidget);Script["\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065"]();async function loadImage(_0x44a055){return await new Request(_0x44a055)["\u006c\u006f\u0061\u0064\u0049\u006d\u0061\u0067\u0065"]();}